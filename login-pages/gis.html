<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>Digital Earth Login</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <style>
      html,
      body {
        margin: 0;
        overflow: hidden;
        background: #000;
        font-family: Segoe UI;
      }
      canvas {
        position: fixed;
        top: 0;
        left: 0;
      }

      /* ===== 登录 ===== */
      .login {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }
      .panel {
        width: 360px;
        padding: 40px;
        background: rgba(10, 30, 60, 0.85);
        border-radius: 16px;
        box-shadow: 0 0 60px rgba(0, 200, 255, 0.4);
        backdrop-filter: blur(10px);
        color: #fff;
        transition: 1s;
      }
      .panel.hide {
        opacity: 0;
        transform: translateY(-80px);
      }
      .panel h2 {
        text-align: center;
        color: #00eaff;
        letter-spacing: 4px;
      }
      .panel input {
        width: 100%;
        padding: 14px;
        margin: 16px 0;
        background: #0008;
        border: 1px solid #0ff5;
        border-radius: 8px;
        color: #fff;
      }
      .panel button {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #00eaff, #0066ff);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        letter-spacing: 2px;
      }

      /* ===== HUD ===== */
      .hud {
        position: fixed;
        inset: 0;
        pointer-events: none;
        opacity: 0;
        transition: 1.5s;
      }
      .hud.show {
        opacity: 1;
      }
      .hud .left,
      .hud .right {
        position: absolute;
        top: 20%;
        width: 260px;
        height: 300px;
        border: 1px solid #0ff;
        background: rgba(0, 50, 80, 0.4);
      }
      .hud .left {
        left: -300px;
        animation: flyL 1.5s forwards;
      }
      .hud .right {
        right: -300px;
        animation: flyR 1.5s forwards;
      }

      @keyframes flyL {
        to {
          left: 20px;
        }
      }
      @keyframes flyR {
        to {
          right: 20px;
        }
      }
    </style>
  </head>

  <body>
    <div class="login">
      <div
        class="panel"
        id="panel">
        <h2>GLOBAL LOGIN</h2>
        <input placeholder="USERNAME" />
        <input
          type="password"
          placeholder="PASSWORD" />
        <button onclick="login()">LOGIN</button>
      </div>
    </div>

    <div
      class="hud"
      id="hud">
      <div class="left"></div>
      <div class="right"></div>
    </div>

    <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>

    <script>
      /* ================= 场景 ================= */
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        60,
        innerWidth / innerHeight,
        0.1,
        1000
      );
      camera.position.z = 4;

      const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
      renderer.setSize(innerWidth, innerHeight);
      document.body.appendChild(renderer.domElement);

      /* ================= 灯光 ================= */
      scene.add(new THREE.AmbientLight(0x4477ff, 0.6));
      const d = new THREE.DirectionalLight(0xffffff, 1);
      d.position.set(5, 3, 5);
      scene.add(d);

      /* ================= 地球 ================= */
      const group = new THREE.Group();
      scene.add(group);

      const earth = new THREE.Mesh(
        new THREE.SphereGeometry(1, 64, 64),
        new THREE.MeshStandardMaterial({
          map: new THREE.TextureLoader().load(
            'https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg'
          ),
          emissive: 0x112244,
          emissiveIntensity: 0.3
        })
      );
      group.add(earth);

      /* 光晕 */
      group.add(
        new THREE.Mesh(
          new THREE.SphereGeometry(1.05, 64, 64),
          new THREE.MeshBasicMaterial({
            color: 0x00aaff,
            transparent: true,
            opacity: 0.15
          })
        )
      );

      /* ================= GeoJSON 国家边界 ================= */
      fetch('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')
        .then((r) => r.json())
        .then((world) => {
          const countries = world.objects.countries.geometries;
          countries.forEach((c) => {
            c.arcs.forEach((a) => {
              const lineGeo = new THREE.BufferGeometry();
              const pts = [];
              a.forEach((p) => {
                const lon = (p[0] * Math.PI) / 180;
                const lat = (p[1] * Math.PI) / 180;
                const r = 1.002;
                pts.push(
                  r * Math.cos(lat) * Math.cos(lon),
                  r * Math.sin(lat),
                  r * Math.cos(lat) * Math.sin(lon)
                );
              });
              lineGeo.setAttribute(
                'position',
                new THREE.Float32BufferAttribute(pts, 3)
              );
              const line = new THREE.Line(
                lineGeo,
                new THREE.LineBasicMaterial({
                  color: 0x00ffff,
                  transparent: true,
                  opacity: 0.6
                })
              );
              group.add(line);
            });
          });
        });

      /* ================= 动画 ================= */
      let rotSpeed = 0.002;
      let zooming = false;

      function animate() {
        requestAnimationFrame(animate);
        group.rotation.y += rotSpeed;
        if (zooming) {
          camera.position.z -= 0.03;
          group.scale.multiplyScalar(0.995);
        }
        renderer.render(scene, camera);
      }
      animate();

      /* ================= 登录联动 ================= */
      function login() {
        panel.classList.add('hide');
        rotSpeed = 0.05;
        setTimeout(() => {
          rotSpeed = 0.005;
          zooming = true;
          hud.classList.add('show');
        }, 1200);
      }

      onresize = () => {
        camera.aspect = innerWidth / innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(innerWidth, innerHeight);
      };
    </script>
  </body>
</html>
